template(name="organizationDetail")
  .organization-detail
    section
      .container
        if editingName
          form.edit-name
            input#organization-name.form-control(type="string" name="name" value=organization.name)
            .actions
              button.btn.btn-primary.btn-sm.save.save-name-button(type="submit") Save
              button.btn.btn-default.btn-sm.cancel.cancel-name-button(type="button") Cancel
        else
          h1= organization.name
          if userIsAdmin
            button.btn-link.edit-inline.edit-name-button
              span Edit
              i.fa.fa-edit
    section.organization-description-wrap.gray
      .container.organization-description
        if editingDescription
          textarea#organization-description.form-control(type="string" name="description")= organization.description
          .actions.right.clearfix
            button.btn.btn-primary.btn-sm.save.save-description-button(type="submit") Save
            button.btn.btn-default.btn-sm.cancel.cancel-description-button(type="button") Cancel
        else
          +paragraphText text=organization.description
          if userIsAdmin
            button.btn-link.edit-inline.edit-description-button
              span Edit
              i.fa.fa-edit
      .container
        .row
          .panel.panel-default
            .panel-heading Members
            .panel-body
              unless userIsMember
                a.btn.btn-default.join-organization Join
            table.table
              thead
                tr
                  th Name
                  th Email
                  th Role
                  th
              tbody
                each admins
                  tr.admin-row
                    td.name
                      if fullName
                        a(href="{{path route='profileDetail' params=this}}")=fullName
                      else
                        a(href="{{path route='profileDetail' params=this}}") Name unknown
                    td.role Admin
                    td
                      if userIsAdmin
                        unless isCurrentUser
                          a.btn.btn-default.remove-admin(data-profileId=_id) Remove admin
                each members
                  tr.member-row
                    td.name
                      if fullName
                        a(href="{{path route='profileDetail' params=this}}")=fullName
                      else
                        a(href="{{path route='profileDetail' params=this}}") Name unknown
                    td.role Member
                    td
                      if userIsAdmin
                        unless isCurrentUser
                          a.btn.btn-default.make-admin(data-profileId=_id) Make admin
